var tool=function(){var a={touchWP:function(a,b,c,d,e){function f(a){switch(a){case"touchstart":return"MSPointerDown";case"touchmove":return"MSPointerMove";case"touchend":return"MSPointerUp"}return""}e=e||!1,e?window.navigator.msPointerEnabled?a.removeEventListener(f(b),c,d):a.removeEventListener(b,c,d):window.navigator.msPointerEnabled?a.addEventListener(f(b),c,d):a.addEventListener(b,c,d)}};return a}(),worker=function(){var a={getLocalStorage:function(){src=JSON.parse(localStorage.getItem("openText")),ajax.load()},saveMark:function(a){var b=document.getElementById("message");localStorage.setItem(src.____name+"Mark"+a,document.body.scrollTop),b.innerHTML="书签"+a+"存储成功",b.classList.remove("ani-message"),setTimeout(function(){b.classList.add("ani-message")},0)},loadMark:function(a){var b=document.getElementById("message"),c=localStorage.getItem(src.____name+"Mark"+a);c?(document.body.scrollTop=c,b.innerHTML="书签"+a+"读取成功",b.classList.remove("ani-message"),setTimeout(function(){b.classList.add("ani-message")},0)):(b.innerHTML="书签"+a+"未找到",b.classList.remove("ani-message"),setTimeout(function(){b.classList.add("ani-message")},0))}};return a}(),ajax=function(){var a={load:function(){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState&&200===a.status&&(text=a.responseText,render.textLoad())},a.open("GET","../"+src.____src,!0),a.send()}};return a}(),render=function(){{var a={pageIni:function(){b.style.width=document.documentElement.clientWidth+"px",c.style.width=document.documentElement.clientWidth-32+"px",tool.touchWP(g,"touchend",function(){f.classList.remove("ani-config-hide"),f.classList.add("ani-config-show"),tool.touchWP(c,"touchend",function(){var a=document.getElementById("markCard");a&&a.parentNode.removeChild(a),f.classList.remove("ani-config-show"),f.classList.add("ani-config-hide")})})},textLoad:function(){c.textContent=text,e.textContent=src.____name},configIni:function(){function a(){worker.saveMark(1)}function b(){worker.saveMark(2)}function e(){worker.saveMark(3)}function f(){worker.loadMark(1)}function g(){worker.loadMark(2)}function h(){worker.loadMark(3)}var i=document.getElementById("configSave"),j=document.getElementById("configLoad"),k=document.getElementById("configNight"),l=document.getElementById("configSize"),m=document.getElementById("configFormat"),n=!1,o=!1,p=!1,q=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),t=document.createElement("div");q.id="markCard",r.innerHTML="书签1",s.innerHTML="书签2",t.innerHTML="书签3",r.classList.add("mark"),s.classList.add("mark"),t.classList.add("mark"),q.appendChild(r),q.appendChild(s),q.appendChild(t),tool.touchWP(i,"touchstart",function(){this.style.backgroundColor="#4FC3F7"}),tool.touchWP(i,"touchend",function(){this.style.backgroundColor="#FFFFFF",q.style.marginTop="",this.appendChild(q),q.classList.add("ani-mark-show"),tool.touchWP(r,"touchend",f,!1,!0),tool.touchWP(s,"touchend",g,!1,!0),tool.touchWP(t,"touchend",h,!1,!0),tool.touchWP(r,"touchend",a),tool.touchWP(s,"touchend",b),tool.touchWP(t,"touchend",e)}),tool.touchWP(j,"touchstart",function(){this.style.backgroundColor="#4FC3F7"}),tool.touchWP(j,"touchend",function(){this.style.backgroundColor="#FFFFFF",q.style.marginTop="40px",this.appendChild(q),q.classList.add("ani-mark-show"),tool.touchWP(r,"touchend",a,!1,!0),tool.touchWP(s,"touchend",b,!1,!0),tool.touchWP(t,"touchend",e,!1,!0),tool.touchWP(r,"touchend",f),tool.touchWP(s,"touchend",g),tool.touchWP(t,"touchend",h)}),tool.touchWP(k,"touchstart",function(){this.style.backgroundColor="#4FC3F7"}),tool.touchWP(k,"touchend",function(){this.style.backgroundColor="#FFFFFF",n?(c.style.backgroundColor="#FFFFFF",c.style.color="#000000",d.style.backgroundColor="#FFFFFF",d.style.color="#000000",n=!1):(c.style.backgroundColor="#444444",c.style.color="#CCCCCC",d.style.backgroundColor="#444444",d.style.color="#CCCCCC",n=!0)}),tool.touchWP(l,"touchstart",function(){this.style.backgroundColor="#4FC3F7"}),tool.touchWP(l,"touchend",function(){this.style.backgroundColor="#FFFFFF",o?(c.style.fontSize="16px",o=!1):(c.style.fontSize="24px",o=!0)}),tool.touchWP(m,"touchstart",function(){this.style.backgroundColor="#4FC3F7"}),tool.touchWP(m,"touchend",function(){this.style.backgroundColor="#FFFFFF",p?(c.textContent=text,p=!1):(c.textContent=text.replace(/ */g,""),p=!0)}),tool.touchWP(r,"touchstart",function(a){a.stopPropagation(),this.style.backgroundColor="#4FC3F7"},!0),tool.touchWP(r,"touchend",function(a){a.stopPropagation(),this.style.backgroundColor="#FFFFFF"},!0),tool.touchWP(s,"touchstart",function(a){a.stopPropagation(),this.style.backgroundColor="#4FC3F7"},!0),tool.touchWP(s,"touchend",function(a){a.stopPropagation(),this.style.backgroundColor="#FFFFFF"},!0),tool.touchWP(t,"touchstart",function(a){a.stopPropagation(),this.style.backgroundColor="#4FC3F7"},!0),tool.touchWP(t,"touchend",function(a){a.stopPropagation(),this.style.backgroundColor="#FFFFFF"},!0)}},b=document.getElementById("view"),c=document.getElementById("stage"),d=document.getElementById("curtain"),e=document.getElementById("name"),f=(document.getElementById("moreVert"),document.getElementById("configCard")),g=document.getElementById("configTouch");document.getElementById("message")}return a}(),src,text;render.pageIni(),worker.getLocalStorage(),render.configIni();